pipeline {
    agent{
        label 'master'
        }
    options {
        timestamps()
        ansiColor('xterm')

    }
    stages {
        stage('download files from git') {
            steps{
                 git clone 'https://github.com/karpovichart/devops.git'
                 git checkout dev
             }
        stage('copy folder to dest') {
            steps{
                 cp /home/jenkins/workspace/projecktname/ansible/devops/ansible/  /home/ubuntu/devops/
             }
        }
        stage('running ansible playbook') {
            steps {
                ansiblePlaybook(
                becomeUser: 'user_jenkins',
                colorized: true,
                inventory: '/home/jenkins/workspace/ansible/devops/ansible/hosts.ini',
                playbook: '/home/ubuntu/devops/ansible/pb_conf_wp.yml')
            }
        }
    }
}
